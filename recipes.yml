# Recipe definitions for Ruly
# Each recipe defines a collection of rule files to combine
# Use 'ruly import --recipe <name>' or 'ruly squash --recipe <name>' to use a specific recipe

# Global default plan (can be overridden per recipe or in user config)
plan: claude_pro

recipes:
  # WorkAxle recipes - Dynamic loading based on current task
  core:
    description: "WorkAxle essential patterns only"
    files:
      - /Users/patrick/Projects/ruly/rules/workaxle/core.md
      - /Users/patrick/Projects/ruly/rules/workaxle/core/essential/
    mcp_servers:
      - task-master-ai # Task management and workflow tracking

  bug:
    description: "WorkAxle bug investigation and fixing (coding only)"
    files:
      - /Users/patrick/Projects/ruly/rules/workaxle/core.md
      - /Users/patrick/Projects/ruly/rules/workaxle/core/essential/
      - /Users/patrick/Projects/ruly/rules/workaxle/profiles/bug-investigation.md
      - /Users/patrick/Projects/ruly/rules/bug/
      - /Users/patrick/Projects/ruly/rules/bug/skills/debugging.md
      # Context fetching via subagent (MUST be always loaded)
      - /Users/patrick/Projects/ruly/rules/comms/use-context-fetcher.md
      # PR operations
      - /Users/patrick/Projects/ruly/rules/github/pr/commands/create.md
      - /Users/patrick/Projects/ruly/rules/github/pr/commands/create-develop.md
      - /Users/patrick/Projects/ruly/rules/github/pr/commands/create-dual.md
      - /Users/patrick/Projects/ruly/rules/github/pr/commands/review-feedback-loop.md
      - /Users/patrick/Projects/ruly/rules/github/pr/commands/verify-develop-mergability.md
    mcp_servers:
      - task-master-ai # Task management and workflow tracking
    subagents:
      - name: context_fetcher
        recipe: context-fetcher

  testing:
    description: "WorkAxle RSpec testing and TDD"
    files:
      - /Users/patrick/Projects/ruly/rules/workaxle/core.md
      - /Users/patrick/Projects/ruly/rules/workaxle/profiles/testing.md
      - /Users/patrick/Projects/ruly/rules/workaxle/core/frameworks/rspec-basics.md
      - /Users/patrick/Projects/ruly/rules/workaxle/core/frameworks/rspec-sequel.md
      - /Users/patrick/Projects/ruly/rules/workaxle/core/frameworks/rspec-factories.md
      - /Users/patrick/Projects/ruly/rules/workaxle/core/frameworks/rspec-mocking.md
      - /Users/patrick/Projects/ruly/rules/workaxle/core/frameworks/rspec-patterns.md
      - /Users/patrick/Projects/ruly/rules/workaxle/core/frameworks/rspec-advanced.md
      - /Users/patrick/Projects/ruly/rules/workaxle/core/testing/
      - /Users/patrick/Projects/ruly/rules/workaxle/archive/testing/commands/require.md
      - /Users/patrick/Projects/ruly/rules/github/pr/commands/create.md
      - /Users/patrick/Projects/ruly/rules/github/pr/commands/squash-and-merge.md
      - /Users/patrick/Projects/ruly/rules/github/pr/commands/merge-to-develop.md
      - /Users/patrick/Projects/ruly/rules/github/pr/commands/merge-main-to-develop.md
      - /Users/patrick/Projects/ruly/rules/comms/github/pr/commands/request-review.md
      - /Users/patrick/Projects/ruly/rules/github/pr/commands/review-feedback-loop.md
      - /Users/patrick/Projects/ruly/rules/comms/jira/commands/ready-for-qa.md
    mcp_servers:
      - playwright # For UI/integration testing
      - task-master-ai # Task management and workflow tracking

  migration:
    description: "WorkAxle database migrations"
    files:
      - /Users/patrick/Projects/ruly/rules/workaxle/core.md
      - /Users/patrick/Projects/ruly/rules/workaxle/profiles/migration.md
      - /Users/patrick/Projects/ruly/rules/workaxle/core/migrations/
    mcp_servers:
      - task-master-ai # Task management and workflow tracking

  grpc:
    description: "WorkAxle gRPC service development"
    files:
      - /Users/patrick/Projects/ruly/rules/workaxle/core.md
      - /Users/patrick/Projects/ruly/rules/workaxle/profiles/grpc.md
      - /Users/patrick/Projects/ruly/rules/workaxle/core/services/grpc/
      - /Users/patrick/Projects/ruly/rules/bug/commands/grpc.md
      - /Users/patrick/Projects/ruly/rules/github/pr/commands/create.md
      - /Users/patrick/Projects/ruly/rules/github/pr/commands/squash-and-merge.md
      - /Users/patrick/Projects/ruly/rules/github/pr/commands/merge-to-develop.md
      - /Users/patrick/Projects/ruly/rules/github/pr/commands/merge-main-to-develop.md
      - /Users/patrick/Projects/ruly/rules/comms/github/pr/commands/request-review.md
      - /Users/patrick/Projects/ruly/rules/github/pr/commands/review-feedback-loop.md
      - /Users/patrick/Projects/ruly/rules/comms/jira/commands/ready-for-qa.md
    mcp_servers:
      - Ref # For API documentation lookup
      - task-master-ai # Task management and workflow tracking

  pr:
    description: "WorkAxle PR creation and management"
    files:
      - /Users/patrick/Projects/ruly/rules/workaxle/core.md
      - /Users/patrick/Projects/ruly/rules/github/pr/
      - /Users/patrick/Projects/ruly/rules/github/pr/commands/review-feedback-loop.md
    mcp_servers:
      - task-master-ai # Task management and workflow tracking

  feature:
    description: "WorkAxle new feature development (coding only)"
    files:
      - /Users/patrick/Projects/ruly/rules/workaxle/core.md
      - /Users/patrick/Projects/ruly/rules/workaxle/core/essential/
      - /Users/patrick/Projects/ruly/rules/workaxle/core/standards/code-patterns.md
      - /Users/patrick/Projects/ruly/rules/workaxle/core/standards/architecture-patterns.md
      - /Users/patrick/Projects/ruly/rules/workaxle/core/frameworks/sequel.md
      - /Users/patrick/Projects/ruly/rules/workaxle/core/frameworks/monads.md
      - /Users/patrick/Projects/ruly/rules/workaxle/core/testing/
      # Context fetching via subagent (MUST be always loaded)
      - /Users/patrick/Projects/ruly/rules/comms/use-context-fetcher.md
      # PR operations
      - /Users/patrick/Projects/ruly/rules/github/pr/commands/create.md
      - /Users/patrick/Projects/ruly/rules/github/pr/commands/create-develop.md
      - /Users/patrick/Projects/ruly/rules/github/pr/commands/create-dual.md
      - /Users/patrick/Projects/ruly/rules/github/pr/commands/review-feedback-loop.md
      - /Users/patrick/Projects/ruly/rules/github/pr/commands/verify-develop-mergability.md
    mcp_servers:
      - Ref # For documentation lookup
      - task-master-ai # Task management and workflow tracking
    subagents:
      - name: context_fetcher
        recipe: context-fetcher

  auth0:
    description: "WorkAxle Auth0 password and session management development"
    files:
      - /Users/patrick/Projects/ruly/rules/workaxle/core.md
      - /Users/patrick/Projects/ruly/rules/workaxle/core/essential/
      - /Users/patrick/Projects/ruly/rules/workaxle/core/standards/code-patterns.md
      - /Users/patrick/Projects/ruly/rules/workaxle/core/standards/architecture-patterns.md
      - /Users/patrick/Projects/ruly/rules/workaxle/core/frameworks/sequel.md
      - /Users/patrick/Projects/ruly/rules/workaxle/core/frameworks/monads.md
      - /Users/patrick/Projects/ruly/rules/workaxle/core/testing/
      # Auth0 specific
      - /Users/patrick/Projects/ruly/rules/auth0-password-session-management.md
      # Context fetching via subagent (MUST be always loaded)
      - /Users/patrick/Projects/ruly/rules/comms/use-context-fetcher.md
      # PR operations
      - /Users/patrick/Projects/ruly/rules/github/pr/commands/create.md
      - /Users/patrick/Projects/ruly/rules/github/pr/commands/create-develop.md
      - /Users/patrick/Projects/ruly/rules/github/pr/commands/create-dual.md
      - /Users/patrick/Projects/ruly/rules/github/pr/commands/review-feedback-loop.md
      - /Users/patrick/Projects/ruly/rules/github/pr/commands/verify-develop-mergability.md
    mcp_servers:
      - Ref # For documentation lookup
      - task-master-ai # Task management and workflow tracking
    subagents:
      - name: context_fetcher
        recipe: context-fetcher

  refactor:
    description: "WorkAxle code refactoring"
    files:
      - /Users/patrick/Projects/ruly/rules/workaxle/core.md
      - /Users/patrick/Projects/ruly/rules/workaxle/core/standards/
      - /Users/patrick/Projects/ruly/rules/workaxle/core/frameworks/ruby-practices.md
      - /Users/patrick/Projects/ruly/rules/github/pr/commands/create.md
      - /Users/patrick/Projects/ruly/rules/github/pr/commands/squash-and-merge.md
      - /Users/patrick/Projects/ruly/rules/github/pr/commands/merge-to-develop.md
      - /Users/patrick/Projects/ruly/rules/github/pr/commands/merge-main-to-develop.md
      - /Users/patrick/Projects/ruly/rules/comms/github/pr/commands/request-review.md
      - /Users/patrick/Projects/ruly/rules/github/pr/commands/review-feedback-loop.md
      - /Users/patrick/Projects/ruly/rules/comms/jira/commands/ready-for-qa.md
    mcp_servers:
      - task-master-ai # Task management and workflow tracking

  full:
    description: "Complete WorkAxle documentation"
    files:
      - /Users/patrick/Projects/ruly/rules/workaxle/core.md
      - /Users/patrick/Projects/ruly/rules/workaxle/commands.md
      - /Users/patrick/Projects/ruly/rules/workaxle/core/
      - /Users/patrick/Projects/ruly/rules/bug/
      - /Users/patrick/Projects/ruly/rules/github/pr/
      - /Users/patrick/Projects/ruly/rules/comms/jira/
      - /Users/patrick/Projects/ruly/rules/comms/atlassian-common.md
      - /Users/patrick/Projects/ruly/rules/comms/accounts.md
      - /Users/patrick/Projects/ruly/rules/comms/adf-formatting.md
      - /Users/patrick/Projects/ruly/rules/comms/ms-teams/
      - /Users/patrick/Projects/ruly/rules/workaxle/commands/
      - /Users/patrick/Projects/ruly/rules/workaxle/profiles/
      - /Users/patrick/Projects/ruly/rules/workaxle/archive/
      - /Users/patrick/Projects/ruly/rules/workaxle/user-svc/
      - /Users/patrick/Projects/ruly/rules/workaxle/orchestrator/
    mcp_servers:
      - teams # MS Teams integration
      - playwright # UI testing
      - Ref # Documentation lookup
      - task-master-ai # Task management and workflow tracking
    subagents:
      - name: ms_teams_dm
        recipe: ms-teams-dm
      - name: jira_comment
        recipe: jira-comment
      - name: jira_bug_report
        recipe: jira-bug-report
      - name: jira_epic
        recipe: jira-epic
      - name: jira_initiative
        recipe: jira-initiative
      - name: jira_story
        recipe: jira-story
      - name: jira_ready_for_qa
        recipe: jira-ready-for-qa

  finalize:
    description: "WorkAxle final testing and cleanup phase"
    files:
      - /Users/patrick/Projects/ruly/rules/workaxle/core.md
      - /Users/patrick/Projects/ruly/rules/workaxle/core/testing/
      - /Users/patrick/Projects/ruly/rules/workaxle/core/frameworks/rspec-basics.md
      - /Users/patrick/Projects/ruly/rules/workaxle/core/frameworks/rspec-sequel.md
      - /Users/patrick/Projects/ruly/rules/bug/rspec-debugging-guide.md
      - /Users/patrick/Projects/ruly/rules/bug/debugging.md
      - /Users/patrick/Projects/ruly/rules/bug/debugging.md
      - /Users/patrick/Projects/ruly/rules/github/pr/commands/make-tests-green.md
      - /Users/patrick/Projects/ruly/rules/github/pr/commands/create.md
      - /Users/patrick/Projects/ruly/rules/github/pr/commands/squash-and-merge.md
      - /Users/patrick/Projects/ruly/rules/github/pr/commands/merge-to-develop.md
      - /Users/patrick/Projects/ruly/rules/github/pr/commands/merge-main-to-develop.md
      - /Users/patrick/Projects/ruly/rules/comms/github/pr/commands/request-review.md
      - /Users/patrick/Projects/ruly/rules/github/pr/commands/review-feedback-loop.md
      - /Users/patrick/Projects/ruly/rules/comms/jira/commands/ready-for-qa.md
    mcp_servers:
      - playwright # For UI/integration testing
      - task-master-ai # Task management and workflow tracking

  review:
    description: "WorkAxle final review and QA stage"
    files:
      - /Users/patrick/Projects/ruly/rules/comms/jira/commands/comment.md
      - /Users/patrick/Projects/ruly/rules/comms/ms-teams/commands/dm.md
      - /Users/patrick/Projects/ruly/rules/github/pr/common.md
      - /Users/patrick/Projects/ruly/rules/workaxle/core/
    mcp_servers:
      - atlassian # For Confluence page creation only (Jira uses CLI)

  jira:
    description: "Jira operations (uses CLI)"
    files:
      - /Users/patrick/Projects/ruly/rules/workaxle/core.md
      - /Users/patrick/Projects/ruly/rules/comms/jira/
      - /Users/patrick/Projects/ruly/rules/comms/atlassian-common.md
      - /Users/patrick/Projects/ruly/rules/comms/accounts.md
      - /Users/patrick/Projects/ruly/rules/comms/adf-formatting.md
      - /Users/patrick/Projects/ruly/rules/comms/ms-teams/commands/dm.md
      - /Users/patrick/Projects/ruly/rules/comms/ms-teams/commands/details.md
      - /Users/patrick/Projects/ruly/rules/comms/commands/full-context.md
    mcp_servers:
      - teams # For Teams DM notifications
      - task-master-ai # Task management and workflow tracking
    subagents:
      - name: ms_teams_dm
        recipe: ms-teams-dm
      - name: jira_comment
        recipe: jira-comment
      - name: jira_bug_report
        recipe: jira-bug-report
      - name: jira_epic
        recipe: jira-epic
      - name: jira_initiative
        recipe: jira-initiative
      - name: jira_story
        recipe: jira-story
      - name: jira_ready_for_qa
        recipe: jira-ready-for-qa

  confluence:
    description: "WorkAxle Confluence operations (requires atlassian MCP)"
    files:
      - /Users/patrick/Projects/ruly/rules/workaxle/core.md
      - /Users/patrick/Projects/ruly/rules/comms/confluence/
      - /Users/patrick/Projects/ruly/rules/comms/accounts.md
    mcp_servers:
      - atlassian # Required for Confluence page creation
      - task-master-ai # Task management and workflow tracking

  orchestrator:
    description: "WorkAxle multi-service development and E2E testing"
    files:
      - /Users/patrick/Projects/ruly/rules/workaxle/core.md
      - /Users/patrick/Projects/ruly/rules/workaxle/orchestrator/
      - /Users/patrick/Projects/ruly/rules/github/pr/commands/create.md
      - /Users/patrick/Projects/ruly/rules/skills/deploy-to-production.md
    mcp_servers:
      - playwright # For E2E testing
      - Ref # For documentation lookup
      - task-master-ai # Task management and workflow tracking

  gateway:
    description: "WorkAxle Gateway NestJS/TypeScript development with orchestrator patterns"
    files:
      - /Users/patrick/Projects/ruly/rules/workaxle/core.md
      - /Users/patrick/Projects/ruly/rules/workaxle/orchestrator/
      - /Users/patrick/Projects/ruly/rules/workaxle/gateway/
      - /Users/patrick/Projects/ruly/rules/github/pr/commands/create.md
      - /Users/patrick/Projects/ruly/rules/github/pr/commands/squash-and-merge.md
      - /Users/patrick/Projects/ruly/rules/github/pr/commands/merge-to-develop.md
      - /Users/patrick/Projects/ruly/rules/github/pr/commands/merge-main-to-develop.md
      - /Users/patrick/Projects/ruly/rules/comms/github/pr/commands/request-review.md
      - /Users/patrick/Projects/ruly/rules/github/pr/commands/review-feedback-loop.md
      - /Users/patrick/Projects/ruly/rules/comms/jira/commands/ready-for-qa.md
    mcp_servers:
      - playwright # For E2E testing
      - Ref # For documentation lookup
      - task-master-ai # Task management and workflow tracking

  playwright:
    description: "WorkAxle Playwright E2E testing and browser automation"
    files:
      - /Users/patrick/Projects/ruly/rules/workaxle/core.md
      - /Users/patrick/Projects/ruly/rules/workaxle/orchestrator/playwright.md
      - /Users/patrick/Projects/ruly/rules/workaxle/orchestrator/e2e-testing-multi-service.md
      - /Users/patrick/Projects/ruly/rules/workaxle/orchestrator/workaxle-e2e-feature-implementation.md
      - /Users/patrick/Projects/ruly/rules/workaxle/core/testing/
      - /Users/patrick/Projects/ruly/rules/comms/jira/
    mcp_servers:
      - playwright # For browser automation and E2E testing
      - task-master-ai # Task management and workflow tracking

  spike:
    description: "WorkAxle spike investigation and research for Jira tasks"
    files:
      - /Users/patrick/Projects/ruly/rules/workaxle/core.md
      - /Users/patrick/Projects/ruly/rules/workaxle/profiles/bug-investigation.md
      - /Users/patrick/Projects/ruly/rules/workaxle/core/standards/architecture-patterns.md
      - /Users/patrick/Projects/ruly/rules/workaxle/core/standards/code-patterns.md
      - /Users/patrick/Projects/ruly/rules/workaxle/core/reference/
      - /Users/patrick/Projects/ruly/rules/bug/debugging.md
      - /Users/patrick/Projects/ruly/rules/bug/debugging.md
      - /Users/patrick/Projects/ruly/rules/bug/skills/debugging.md
      - /Users/patrick/Projects/ruly/rules/workaxle/orchestrator/
      - /Users/patrick/Projects/ruly/rules/comms/
      - /Users/patrick/Projects/ruly/rules/bug/commands/diagnose.md
    mcp_servers:
      - atlassian # For Confluence page creation only (Jira uses CLI)
      - Ref # For documentation lookup and external research
      - task-master-ai # Task management and spike tracking

  initiative-core:
    description: "WorkAxle initiative investigation and planning"
    files:
      - /Users/patrick/Projects/ruly/rules/workaxle/core.md
      - /Users/patrick/Projects/ruly/rules/workaxle/core/standards/architecture-patterns.md
      - /Users/patrick/Projects/ruly/rules/workaxle/core/standards/code-patterns.md
      - /Users/patrick/Projects/ruly/rules/workaxle/core/reference/
      - /Users/patrick/Projects/ruly/rules/comms/jira/
      - /Users/patrick/Projects/ruly/rules/comms/atlassian-common.md
      - /Users/patrick/Projects/ruly/rules/comms/accounts.md
    mcp_servers:
      - Ref # For documentation lookup and external research
      - task-master-ai # Task management and spike tracking

  agile:
    description: "WorkAxle agile planning with orchestrator patterns"
    files:
      - /Users/patrick/Projects/ruly/rules/workaxle/core.md
      - /Users/patrick/Projects/ruly/rules/workaxle/core/standards/architecture-patterns.md
      - /Users/patrick/Projects/ruly/rules/workaxle/core/standards/code-patterns.md
      - /Users/patrick/Projects/ruly/rules/workaxle/core/reference/
      - /Users/patrick/Projects/ruly/rules/comms/
      - /Users/patrick/Projects/ruly/rules/workaxle/orchestrator/
      - /Users/patrick/Projects/ruly/rules/comms/ms-teams/commands/dm.md
      - /Users/patrick/Projects/ruly/rules/comms/ms-teams/commands/details.md
      - /Users/patrick/Projects/ruly/rules/comms/commands/full-context.md
    mcp_servers:
      - atlassian # For Confluence page creation only (Jira uses CLI)
      - teams # For Teams DM notifications
      - Ref # For documentation lookup and external research
      - task-master-ai # Task management and spike tracking
    subagents:
      - name: ms_teams_dm
        recipe: ms-teams-dm
      - name: jira_comment
        recipe: jira-comment
      - name: jira_bug_report
        recipe: jira-bug-report
      - name: jira_epic
        recipe: jira-epic
      - name: jira_initiative
        recipe: jira-initiative
      - name: jira_story
        recipe: jira-story
      - name: jira_ready_for_qa
        recipe: jira-ready-for-qa

  local:
    description: "Local development with all MCP servers, no rule files"
    files:
      - /Users/patrick/Projects/ruly/rules/home/
      - /Users/patrick/Projects/ruly/rules/llmux-tools-setup.md
    mcp_servers:
      - playwright # Browser automation and UI testing
      - Ref # Documentation reference lookup
      - task-master-ai # Task management and workflow tracking

  awesomer:
    description: "Local development with Plane and GitHub integration (no Playwright)"
    files:
      - /Users/patrick/Projects/ruly/rules/awesomer
      - /Users/patrick/Projects/ruly/rules/home/network-structure.md
      - /Users/patrick/Projects/ruly/rules/workaxle/core/frameworks/monads.md
      - /Users/patrick/Projects/ruly/rules/workaxle/core/frameworks/ruby-practices.md
      - /Users/patrick/Projects/ruly/rules/workaxle/core/standards/code-patterns.md
      - /Users/patrick/Projects/ruly/rules/home/plane-synology-setup.md
    mcp_servers:
      - playwright # Browser automation and UI testing
      - plane # Plane project management
      - Ref # Documentation reference lookup
      - task-master-ai # Task management and workflow tracking

  merger:
    description: "PR merging commands only (no code knowledge needed)"
    files:
      - /Users/patrick/Projects/ruly/rules/workaxle/core.md
      # PR details and merging
      - /Users/patrick/Projects/ruly/rules/skills/deploy-to-production.md
      - /Users/patrick/Projects/ruly/rules/github/pr/commands/squash-and-merge.md
      - /Users/patrick/Projects/ruly/rules/github/pr/commands/merge-to-develop.md
      - /Users/patrick/Projects/ruly/rules/github/pr/commands/merge-main-to-develop.md
      - /Users/patrick/Projects/ruly/rules/github/pr/commands/update-branches.md
      - /Users/patrick/Projects/ruly/rules/github/pr/commands/verify-develop-mergability.md
      - /Users/patrick/Projects/ruly/rules/github/pr/common.md
      - /Users/patrick/Projects/ruly/rules/github/pr/merge-common.md
      - /Users/patrick/Projects/ruly/rules/git/skills/rebase-and-squash.md
    mcp_servers:
      - task-master-ai # Task management and workflow tracking

  comms:
    description: "Communication via Jira, Teams, and GitHub (no code knowledge needed)"
    files:
      - /Users/patrick/Projects/ruly/rules/workaxle/core.md
      # Communications - Teams, Jira comments, full-context
      - /Users/patrick/Projects/ruly/rules/comms/commands/
      - /Users/patrick/Projects/ruly/rules/comms/jira/
      - /Users/patrick/Projects/ruly/rules/comms/ms-teams/
      - /Users/patrick/Projects/ruly/rules/comms/github/pr/
      - /Users/patrick/Projects/ruly/rules/comms/confluence/commands/change-proposals.md
      # Jira operations - details, transitions
      - /Users/patrick/Projects/ruly/rules/comms/jira/
      - /Users/patrick/Projects/ruly/rules/comms/atlassian-common.md
      - /Users/patrick/Projects/ruly/rules/comms/accounts.md
      - /Users/patrick/Projects/ruly/rules/comms/adf-formatting.md
    mcp_servers:
      - teams # For Teams DM notifications
      - atlassian # For Confluence page creation
      - task-master-ai # Task management and workflow tracking
    subagents:
      - name: ms_teams_dm
        recipe: ms-teams-dm
      - name: jira_comment
        recipe: jira-comment
      - name: jira_bug_report
        recipe: jira-bug-report
      - name: jira_epic
        recipe: jira-epic
      - name: jira_initiative
        recipe: jira-initiative
      - name: jira_story
        recipe: jira-story
      - name: jira_ready_for_qa
        recipe: jira-ready-for-qa

  dashboard:
    description: "Open PRs dashboard with context fetching via subagent"
    files:
      - /Users/patrick/Projects/ruly/rules/comms/commands/dashboard.md
      - /Users/patrick/Projects/ruly/rules/github/pr/merge-common.md
      # MUST include the rule that enforces subagent usage
      - /Users/patrick/Projects/ruly/rules/comms/use-context-fetcher.md
    subagents:
      - name: context_fetcher
        recipe: context-fetcher

  context-fetcher:
    description: "Fetch and cache Jira/PR/Teams context for a ticket"
    files:
      # CRITICAL: This file tells the subagent what to DO when dispatched
      - /Users/patrick/Projects/ruly/rules/comms/context-fetcher-subagent.md
      - /Users/patrick/Projects/ruly/rules/comms/commands/context-fetching.md
      - /Users/patrick/Projects/ruly/rules/comms/jira/fetching-jira-details.md
    mcp_servers:
      - teams  # For fetching Teams threads

  ms-teams-dm:
    description: "Send a Teams DM (subagent execution)"
    files:
      # CRITICAL: This file tells the subagent what to DO when dispatched
      - /Users/patrick/Projects/ruly/rules/comms/ms-teams/agents/ms-teams-dm.md
      - /Users/patrick/Projects/ruly/rules/comms/ms-teams/common.md
      - /Users/patrick/Projects/ruly/rules/comms/accounts.md
    mcp_servers:
      - teams  # For Teams MCP calls

  jira-comment:
    description: "Post a Jira comment (subagent execution)"
    files:
      - /Users/patrick/Projects/ruly/rules/comms/jira/agents/jira-comment.md
      - /Users/patrick/Projects/ruly/rules/comms/accounts.md

  jira-bug-report:
    description: "Create a Jira bug report (subagent execution)"
    files:
      - /Users/patrick/Projects/ruly/rules/comms/jira/agents/jira-bug-report.md
      - /Users/patrick/Projects/ruly/rules/comms/accounts.md

  jira-epic:
    description: "Create a Jira epic (subagent execution)"
    files:
      - /Users/patrick/Projects/ruly/rules/comms/jira/agents/jira-epic.md
      - /Users/patrick/Projects/ruly/rules/comms/accounts.md
    mcp_servers:
      - atlassian  # Uses Atlassian MCP for issue creation

  jira-initiative:
    description: "Create a Jira initiative (subagent execution)"
    files:
      - /Users/patrick/Projects/ruly/rules/comms/jira/agents/jira-initiative.md
      - /Users/patrick/Projects/ruly/rules/comms/accounts.md
    mcp_servers:
      - atlassian  # Uses Atlassian MCP for issue creation

  jira-story:
    description: "Create a Jira story (subagent execution)"
    files:
      - /Users/patrick/Projects/ruly/rules/comms/jira/agents/jira-story.md
      - /Users/patrick/Projects/ruly/rules/comms/accounts.md
    mcp_servers:
      - atlassian  # Uses Atlassian MCP for issue creation

  jira-ready-for-qa:
    description: "Notify QA - comment, transition, and Teams DM (subagent execution)"
    files:
      - /Users/patrick/Projects/ruly/rules/comms/jira/agents/jira-ready-for-qa.md
      - /Users/patrick/Projects/ruly/rules/comms/accounts.md
      - /Users/patrick/Projects/ruly/rules/comms/ms-teams/common.md
    mcp_servers:
      - teams  # Uses Teams MCP for DM

